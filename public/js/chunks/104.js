"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[104],{4439:(t,e,a)=>{a.d(e,{Z:()=>n});const n=(0,a(1900).Z)({},undefined,undefined,!1,null,null,null).exports},669:(t,e,a)=>{a.d(e,{Z:()=>i});const n={props:{data:{type:Object,default:function(){return{title:"Table Header",isFetching:!1,keyword:""}}},options:{type:Boolean,default:function(){return!1}},hide:{type:Array,default:function(){return[]}},disable:{type:Array,default:function(){return[]}}}};const i=(0,a(1900).Z)(n,(function(){var t=this,e=t._self._c;return e("div",[e("v-toolbar",{attrs:{flat:""}},[e("v-toolbar-title",[t._v(t._s(t.data.title))]),t._v(" "),e("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t._v(" "),t.hide.includes("refresh")?t._e():e("v-icon",{on:{click:function(e){return e.stopPropagation(),t.$emit("refresh")}}},[t._v("\n            mdi-autorenew\n            "+t._s(t.data.isFetching?"mdi-spin":"")+"\n        ")]),t._v(" "),e("v-spacer"),t._v(" "),e("div",{staticClass:"d-inline mr-2"},[e("v-text-field",{attrs:{dense:"",placeholder:"Search ...","append-icon":"mdi-magnify","hide-details":""}})],1),t._v(" "),t.hide.includes("excel")?t._e():e("v-tooltip",{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on,i=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{color:"success",dark:""},on:{click:function(e){return e.stopPropagation(),t.$emit("importExcel")}}},"v-btn",i,!1),n),[t._v("\n                    Import Excel \n                    "),e("v-icon",[t._v("mdi-upload")])],1)]}}],null,!1,1581108941)},[t._v(" "),e("span",[t._v("Import from excel file")])]),t._v(" "),t.hide.includes("download")?t._e():e("v-tooltip",{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on,i=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),n),[t._v("\n                    Download \n                    "),e("v-icon",[t._v("mdi-download")])],1)]}}],null,!1,158237777)},[t._v(" "),e("span",[t._v("Download "+t._s(t.data.title)+" record")])]),t._v(" "),t.hide.includes("addNew")?t._e():e("v-tooltip",{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on,i=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{color:"secondary",dark:""},on:{click:function(e){return e.stopPropagation(),t.$emit("addNew")}}},"v-btn",i,!1),n),[t._v("\n                    Create \n                    "),e("v-icon",[t._v("mdi-plus")])],1)]}}],null,!1,20837204)},[t._v(" "),e("span",[t._v("Add New")])])],1)],1)}),[],!1,null,null,null).exports},9104:(t,e,a)=>{a.r(e),a.d(e,{default:()=>d});var n=a(4439);const i={data:function(){return{payload:{title:"",content:""},orig:{title:"",content:""},rule:[function(t){return!!t||"This field is required"}]}},props:{show:{type:Boolean,default:function(){return!1}},edit:{type:Boolean,default:function(){return!1}},data:{type:Object,default:function(){}}},mounted:function(){console.log(this._getters("is_editing"),"form")},methods:{save:function(){this.payload.title&&this.payload.content?this.isEdit?(this.$emit("update",this.payload),this.closeForm()):(this.$emit("save",this.payload),this.closeForm()):alert("Important field are required")},closeForm:function(){var t=this;this.$emit("close"),setTimeout((function(){t._commit("is_editing",!1),t.payload=JSON.parse(JSON.stringify(t.orig))}),200)}},computed:{isEdit:function(){return this._getters("is_editing")}},watch:{data:{handler:function(t){t&&(this.payload=t)},immediate:!0,deep:!0}}};var o=a(1900);const s=(0,o.Z)(i,(function(){var t=this,e=t._self._c;return e("div",[e("v-dialog",{attrs:{persistent:"","max-width":"600"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[e("v-card",[e("v-card-title",[t._v("Announcement Info")]),t._v(" "),e("v-divider",{staticClass:"mt-0 pt-0"}),t._v(" "),e("v-card-text",{},[e("v-row",[e("v-col",{attrs:{md:"12",cols:"12"}},[e("v-text-field",{attrs:{dense:"",label:"Heading/Titile",readonly:t.isEdit,rules:t.rule,filled:"",required:"","hide-details":"auto"},model:{value:t.payload.title,callback:function(e){t.$set(t.payload,"title",e)},expression:"payload.title"}})],1),t._v(" "),e("v-col",{attrs:{md:"12",cols:"12"}},[e("v-textarea",{attrs:{dense:"",label:"Content/Message",readonly:t.isEdit,rules:t.rule,filled:"",required:"","hide-details":"auto"},model:{value:t.payload.content,callback:function(e){t.$set(t.payload,"content",e)},expression:"payload.content"}})],1)],1)],1),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{text:""},on:{click:t.closeForm}},[t._v("\n                    Close\n                ")]),t._v(" "),t.isEdit?t._e():e("v-btn",{attrs:{color:"secondary"},on:{click:t.save}},[t._v("\n                    "+t._s(t.isEdit?"Update":"Send")+"\n                    "),e("v-icon",{staticClass:"ml-2"},[t._v("mdi-"+t._s(t.isEdit?"content-save":"send"))])],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports;var r=a(669);const l={components:{DeleteDialog:n.Z,DataForm:s,TableHeader:r.Z},data:function(){return{form:!1,excelForm:!1,data:{title:"Announcement",isFetching:!1,keyword:"",filter:{}},footerPages:{"items-per-page-options":[5,10,15,20,30,40,50,100,-1]},options:{itemsPerPage:15},total:0,deleteForm:!1,showForm:!1,dialogDelete:!1,items:[],selectedItem:{},selected:[],headers:[{text:"ID",align:"start",sortable:!0,value:"id"},{text:"Title",align:"start",sortable:!0,value:"title"},{text:"Content",align:"start",sortable:!1,value:"content"},{text:"Date Added",align:"start",sortable:!0,value:"created_at"},{text:"Actions",align:"center",sortable:!1,value:"action"}]}},methods:{fetchPage:function(){var t=this;this.data.isFetching=!0;var e=this._createParams(this.options);e+=this._createFilterParams(this.data.filter),this.data.keyword&&(e=e+"&keyword="+this.data.keyword),axios.get("/admin-api/announcement?".concat(e)).then((function(e){var a=e.data;t.data_items=a.data,t.total=a.total,t.data.isFetching=!1}))},editItem:function(t){this._commit("is_editing",!0),this.selectedItem=t,this.form=!0},save:function(t){var e=this;this.form=!1,axios.post("/admin-api/announcement",t).then((function(t){var a=t.data;e.fetchPage(),e._newAlert(!0,a.type,a.message)})).finally((function(){e.showForm=!1,e.payload=null}))},update:function(t){var e=this;axios.put("/admin-api/announcement/".concat(t.id),t).then((function(t){var a=t.data;e.form=!1,e.fetchPage(),e._newAlert(!0,a.type,a.message),e.selectedItem=null}))},importExcel:function(){this.excelForm=!0},close:function(){this.selectedItem={},this.form=!1,this.warning_data.trigger=!1},warning:function(t){this.selectedItem=t;this._warning(!0,"Are you sure you want to delete",t.title),this.deleteForm=!0},confirm:function(){var t=this;this.warning_data.trigger=!1,axios.delete("/admin-api/announcement/".concat(this.selectedItem.id)).then((function(e){var a=e.data;t.fetchPage(),t._newAlert(!0,a.type,a.message)}))}}};const d=(0,o.Z)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"pa-2"},[e("v-card",{staticClass:"pa-2",attrs:{elevation:"2"}},[e("table-header",{attrs:{data:t.data,hide:["filter","download","excel"]},on:{addNew:t.addNew,refresh:t.fetchPage,importExcel:t.importExcel,search:t.fetchPage},scopedSlots:t._u([{key:"custom_filter",fn:function(){return[e("admin-filter",{attrs:{filter:t.data.filter}})]},proxy:!0}])}),t._v(" "),e("v-data-table",{staticClass:"cursor-pointer table-fix-height clickable-item",attrs:{headers:t.headers,items:t.data_items,search:t.data.keyword,loading:t.data.isFetching,"server-items-length":t.total,"footer-props":t.footerPages,options:t.options,"items-per-page":t.options.itemsPerPage,"fixed-header":""},on:{"update:options":[function(e){t.options=e},t.fetchPage],"click:row":t.viewItem},scopedSlots:t._u([{key:"item.created_at",fn:function(e){var a=e.item;return[t._v("\n                "+t._s(t.moment(a.created_at).format("YYYY-MM-DD, h:mm a"))+"\n            ")]}},{key:"item.action",fn:function(a){var n=a.item;return[e("v-btn",{attrs:{color:"primary",small:""},on:{click:function(e){return t.editItem(n)}}},[e("v-icon",{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-eye")]),t._v("\n                    View\n                ")],1)]}},{key:"no-data",fn:function(){return[e("div",[t._v("No Data")])]},proxy:!0}],null,!0)})],1),t._v(" "),t.form?[e("data-form",{attrs:{show:!0,data:t.selectedItem},on:{close:t.close,save:t.save,update:t.update}})]:t._e(),t._v(" "),e("Alert",{attrs:{data:t.alert_data}}),t._v(" "),e("Warning",{attrs:{data:t.warning_data},on:{close:t.close,confirm:t.confirm}})],2)}),[],!1,null,null,null).exports}}]);