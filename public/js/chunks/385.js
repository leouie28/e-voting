"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[385],{4439:(t,e,a)=>{a.d(e,{Z:()=>o});const o=(0,a(1900).Z)({},undefined,undefined,!1,null,null,null).exports},8417:(t,e,a)=>{a.d(e,{Z:()=>n});const o={props:{data:{type:Object,default:function(){return{title:"Table Header",isFetching:!1,keyword:""}}},options:{type:Boolean,default:function(){return!1}},hide:{type:Array,default:function(){return[]}},disable:{type:Array,default:function(){return[]}}}};const n=(0,a(1900).Z)(o,(function(){var t=this,e=t._self._c;return e("div",[e("v-toolbar",{attrs:{flat:""}},[e("v-toolbar-title",[t._v(t._s(t.data.title))]),t._v(" "),e("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t._v(" "),t.hide.includes("refresh")?t._e():e("v-icon",{on:{click:function(e){return e.stopPropagation(),t.$emit("refresh")}}},[t._v("\n            mdi-autorenew\n            "+t._s(t.data.isFetching?"mdi-spin":"")+"\n        ")]),t._v(" "),e("v-spacer"),t._v(" "),t.hide.includes("search")?t._e():e("div",{staticClass:"d-inline mr-2"},[e("v-text-field",{attrs:{dense:"",placeholder:"Search ...","append-icon":"mdi-magnify","hide-details":""}})],1),t._v(" "),t.hide.includes("excel")?t._e():e("v-tooltip",{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on,n=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{color:"success",dark:""},on:{click:function(e){return e.stopPropagation(),t.$emit("importExcel")}}},"v-btn",n,!1),o),[t._v("\n                    Import Excel \n                    "),e("v-icon",[t._v("mdi-upload")])],1)]}}],null,!1,1581108941)},[t._v(" "),e("span",[t._v("Import from excel file")])]),t._v(" "),t.hide.includes("download")?t._e():e("v-tooltip",{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on,n=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{color:"primary",dark:""}},"v-btn",n,!1),o),[t._v("\n                    Download \n                    "),e("v-icon",[t._v("mdi-download")])],1)]}}],null,!1,158237777)},[t._v(" "),e("span",[t._v("Download "+t._s(t.data.title)+" record")])]),t._v(" "),t.hide.includes("addNew")?t._e():e("v-tooltip",{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.on,n=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"mr-2",attrs:{color:"secondary",dark:""},on:{click:function(e){return e.stopPropagation(),t.$emit("addNew")}}},"v-btn",n,!1),o),[t._v("\n                    Create \n                    "),e("v-icon",[t._v("mdi-plus")])],1)]}}],null,!1,20837204)},[t._v(" "),e("span",[t._v("Add New")])])],1)],1)}),[],!1,null,null,null).exports},1385:(t,e,a)=>{a.r(e),a.d(e,{default:()=>r});var o=a(4439),n=a(8417);const i={components:{DeleteDialog:o.Z,TableHeader:n.Z},data:function(){return{form:!1,excelForm:!1,data:{title:"Elections",isFetching:!1,keyword:"",filter:{}},footerPages:{"items-per-page-options":[5,10,15,20,30,40,50,100,-1]},options:{itemsPerPage:15},total:0,deleteForm:!1,showForm:!1,dialogDelete:!1,items:[],selectedItem:{},selected:[],headers:[{text:"ID",align:"start",sortable:!0,value:"id"},{text:"School Year",align:"start",sortable:!0,value:"school_year"},{text:"Name",align:"start",sortable:!0,value:"name"},{text:"Date Opening",align:"start",sortable:!0,value:"opening"},{text:"Date CLosing",align:"start",sortable:!0,value:"closing"},{text:"Votes",align:"start",sortable:!0,value:"votes"},{text:"Date Added",align:"start",sortable:!0,value:"created_at"},{text:"Status",align:"start",sortable:!1,value:"active"},{text:"Actions",align:"center",sortable:!1,value:"action"}]}},methods:{fetchPage:function(){var t=this;localStorage._show&&localStorage.removeItem("_show"),localStorage.payload&&localStorage.removeItem("payload"),this.data.isFetching=!0;var e=this._createParams(this.options);e+=this._createFilterParams(this.data.filter),this.data.keyword&&(e=e+"&keyword="+this.data.keyword),axios.get("/admin-api/election?".concat(e)).then((function(e){var a=e.data;t.data_items=a.data,t.total=a.total,t.data.isFetching=!1}))},viewElection:function(t){localStorage.setItem("_show",1),axios.get("/admin-api/election/get-set/".concat(t.id)).then((function(t){var e=t.data;localStorage.setItem("payload",JSON.stringify(e))})),this.$router.push({path:this.$route.path+"/"+t.id+"/status"})},getStatus:function(t){var e=this.moment();return this.moment(t.closing)<e?"Ended":t.active?"Active":"Inactive"},editItem:function(t){this.moment()>=this.moment(t.opening)?alert('"'.concat(t.name,"\" is open, you can't edit this election.")):(localStorage.setItem("_show",1),axios.get("/admin-api/election/get-set/".concat(t.id)).then((function(t){var e=t.data;localStorage.setItem("payload",JSON.stringify(e))})),this.$router.push({path:"/admin/election/".concat(t.id,"/details")}))},save:function(t){var e=this;this.form=!1,console.log(t),axios.post("/admin-api/student",t).then((function(t){var a=t.data;e.fetchPage(),e._newAlert(!0,a.type,a.message)})).finally((function(){e.showForm=!1,e.payload=null}))},update:function(t){var e=this;axios.put("/admin-api/customer/".concat(this.selectedItem.id),t).then((function(t){var a=t.data;e.showForm=!1,e.fetchPage(),e._newAlert(!0,a.type,a.message),e.payload=null}))},importExcel:function(){this.excelForm=!0},close:function(){this.form=!1,this.excelForm=!1},warning:function(t){this.selectedItem=t;this._warning(!0,"Are you sure you want to remove",t.name)},confirm:function(){var t=this;this.warning_data.trigger=!1,axios.delete("/admin-api/election/".concat(this.selectedItem.id)).then((function(e){var a=e.data;t.deleteForm=!1,t.fetchPage(),t._newAlert(!0,a.type,a.message)}))}}};const r=(0,a(1900).Z)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"pa-2"},[e("v-card",{staticClass:"pa-2",attrs:{elevation:"2"}},[e("table-header",{attrs:{data:t.data,hide:["filter","download","excel","search"]},on:{addNew:function(e){return t.$router.push({name:"admin-election-form"})},refresh:t.fetchPage,importExcel:t.importExcel,search:t.fetchPage},scopedSlots:t._u([{key:"custom_filter",fn:function(){return[e("admin-filter",{attrs:{filter:t.data.filter}})]},proxy:!0}])}),t._v(" "),e("v-data-table",{staticClass:"cursor-pointer table-fix-height clickable-item",attrs:{headers:t.headers,items:t.data_items,search:t.data.keyword,loading:t.data.isFetching,"server-items-length":t.total,"footer-props":t.footerPages,options:t.options,"items-per-page":t.options.itemsPerPage,"fixed-header":""},on:{"update:options":[function(e){t.options=e},t.fetchPage]},scopedSlots:t._u([{key:"item.opening",fn:function(a){var o=a.item;return[e("v-chip",{attrs:{outlined:"",color:"success"}},[t._v("\n                    "+t._s(t.moment(o.date_open+" "+o.time_open).format("MMM DD YY, h:mm a"))+"\n                ")])]}},{key:"item.closing",fn:function(a){var o=a.item;return[e("v-chip",{attrs:{outlined:"",color:"error"}},[t._v("\n                    "+t._s(t.moment(o.date_close+" "+o.time_close).format("MMM DD YY, h:mm a"))+"\n                ")])]}},{key:"item.created_at",fn:function(e){var a=e.item;return[t._v("\n                "+t._s(t.moment(a.created_at).format("YYYY-MM-DD"))+"\n            ")]}},{key:"item.active",fn:function(e){var a=e.item;return[t._v("\n                "+t._s(t.getStatus(a))+"\n            ")]}},{key:"item.action",fn:function(a){var o=a.item;return[e("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on,i=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"px-2",attrs:{elevation:"0",icon:"",color:"secondary"},on:{click:function(e){return e.stopPropagation(),t.viewElection(o)}}},"v-btn",i,!1),n),[e("v-icon",[t._v("mdi-eye")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("View")])]),t._v(" "),e("v-tooltip",{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on,i=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"px-2",attrs:{elevation:"0",icon:"",color:"primary"},on:{click:function(e){return e.stopPropagation(),t.editItem(o)}}},"v-btn",i,!1),n),[e("v-icon",[t._v("mdi-square-edit-outline")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("Edit")])]),t._v(" "),e("v-tooltip",{attrs:{bottom:"",color:"error"},scopedSlots:t._u([{key:"activator",fn:function(a){var n=a.on,i=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"px-2",attrs:{elevation:"0",icon:"",color:"error"},on:{click:function(e){return t.warning(o)}}},"v-btn",i,!1),n),[e("v-icon",[t._v("mdi-trash-can")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v("Remove")])])]}},{key:"no-data",fn:function(){return[e("div",[t._v("No Data")])]},proxy:!0}],null,!0)})],1),t._v(" "),e("Alert",{attrs:{data:t.alert_data}}),t._v(" "),e("Warning",{attrs:{data:t.warning_data},on:{close:t.close,confirm:t.confirm}})],1)}),[],!1,null,null,null).exports}}]);